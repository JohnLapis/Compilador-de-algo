#+property: header-args :tangle Compiler.java :comments link

* imports
#+begin_src java :noweb-ref imports
package compilador;

import java.nio.file.Path;
import java.nio.file.Paths;
import java.io.IOException;
import java.nio.file.Files;
import java.text.ParseException;
import java.util.List;
#+end_src

* Compiler
#+begin_src java :noweb-ref Compiler
class Compiler {
    public static List<String> main(String[] args) throws IOException, ParseException, Exception {
        // It will only accept one file.
        if (args.length != 1) {
            System.out.println("Wrong number of parameters provided.");
            throw new Exception();
        }

        Path path = Paths.get(args[0]);
        String code;
        try {
            code = String.join("\n", Files.readAllLines(path));
            List<String> tokenizedCode = Scanner.tokenize(code);
            System.out.println("[ " + String.join(", ", tokenizedCode) + " ]");
            return tokenizedCode;
        } catch (IOException e) {
            System.out.println("Error " + e.getMessage());
            e.printStackTrace();
            throw e;
        } catch (ParseException e) {
            System.out.println("Error " + e.getMessage());
            e.printStackTrace();
            throw e;
        }
    }
}
#+end_src
